<?xml version="1.0"?>
<root>
  <OBJECT NAME="Cooperados">
    <METHOD NAME="ListaPorContrato" DESCRIPTION="" VERSION="22" THREADSAFE="0">
      <PARAMS>
        <GROUPS>
          <GROUP/>
        </GROUPS>
        <PARAM NAME="Contrato" FORMAT="N" SIZE="8" FLAGS="2" PROJECTION="0" FIELDLABEL="Contrato" CTAB="0"/>
      </PARAMS>
      <FIELDS>
        <GROUPS>
          <GROUP/>
        </GROUPS>
        <FIELD NAME="Id" FORMAT="N" SIZE="8" FLAGS="1" PROJECTION="0" FIELDLABEL="Id" CTAB="0"/>
        <FIELD NAME="Matricula" SIZE="10" FLAGS="1" PROJECTION="0" FIELDLABEL="Matricula" CTAB="0"/>
        <FIELD NAME="Nome" SIZE="200" FLAGS="1" PROJECTION="0" FIELDLABEL="Nome" CTAB="0"/>
        <FIELD NAME="Produto" FORMAT="N" SIZE="8" FLAGS="10" PROJECTION="0" FIELDLABEL="Produto" CTAB="0"/>
        <FIELD NAME="Veiculo" FORMAT="N" SIZE="8" FLAGS="11" PROJECTION="0" FIELDLABEL="Veiculo" CTAB="0"/>
      </FIELDS>
      <ACTIONSCRIPT>SELECT C.ID,
       C.MATRICULA,
       C.NOME,
       #NULL_TO_Z(CT.ID,999999999) CONTRATO,
       CC.PRODUTO,
       VCP.ID VEICULO
FROM COOPERADOS C
LEFT JOIN CONTRATOSCOOPERADOS CC
     ON CC.COOPERADO = C.ID  AND CC.CONTRATO = :CONTRATO
LEFT JOIN CONTRATOS CT
     ON CT.ID = CC.CONTRATO
LEFT JOIN CONTRATOSVEICULOS CV
     ON CV.CONTRATO = CT.ID
LEFT JOIN VEICULOS VCP
     ON VCP.ID = CV.VEICULO AND
        VCP.COOPERADO = C.ID
ORDER BY CT.ID DESC, C.NOME
</ACTIONSCRIPT>
    </METHOD>
  </OBJECT>
</root>