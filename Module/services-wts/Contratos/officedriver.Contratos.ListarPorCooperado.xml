<?xml version="1.0"?>
<root>
  <OBJECT NAME="Contratos">
    <METHOD NAME="ListarPorCooperado" DESCRIPTION="" VERSION="23" THREADSAFE="0">
      <PARAMS>
        <GROUPS>
          <GROUP/>
        </GROUPS>
        <PARAM NAME="Cooperado" FORMAT="N" SIZE="8" FLAGS="2" PROJECTION="0" FIELDLABEL="Cooperado" CTAB="0"/>
      </PARAMS>
      <FIELDS>
        <GROUPS>
          <GROUP/>
        </GROUPS>
        <FIELD NAME="Id" FORMAT="N" SIZE="8" PROJECTION="0" FIELDLABEL="Id" CTAB="0"/>
        <FIELD NAME="Numero" SIZE="20" FLAGS="1" PROJECTION="0" FIELDLABEL="Numero" CTAB="0"/>
        <FIELD NAME="Descricao" SIZE="100" FLAGS="1" PROJECTION="0" FIELDLABEL="Descricao" CTAB="0"/>
      </FIELDS>
      <ACTIONSCRIPT>SELECT:CNTR C.ID
FROM Contratos C
INNER JOIN ContratosCooperados CC ON (CC.Contrato = C.Id)
WHERE CC.Cooperado=:Cooperado;

#SELECT(CNTR._EOF,
   TRUE:{
        SELECT CR.Id,
               CR.Numero,
               CR.Descricao
        FROM Contratos CR
        ORDER BY DESCRICAO
   },
   ELSE:{
        SELECT C.Id,
               C.Numero,
               C.Descricao
        FROM Contratos C
        INNER JOIN ContratosCooperados CC ON (CC.Contrato = C.Id)
        WHERE CC.Cooperado=:Cooperado
        ORDER BY DESCRICAO
   });



</ACTIONSCRIPT>
    </METHOD>
  </OBJECT>
</root>